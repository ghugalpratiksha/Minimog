(()=>{var t={457:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});o(422);const i=new class{constructor(){return this.component=this.component.bind(this),this.component}component(t,e){for(var o=arguments.length,i=new Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];if("function"==typeof t)return t({...e,children:i});i&&(i=i.filter((t=>null!==t))),e&&(e.class&&(e.className=e.class),delete e.children);let n="fragment"!==t?function(t,e){e=e||{};let o=document.createElement(t);try{o=Object.assign(o,e)}catch{const t=Object.keys(e);for(let i=0;i<t.length;i++)"dataSet"!==e[i]&&o.setAttribute(t[i],e[t[i]])}return o}(t,e):document.createDocumentFragment();if(-1!==["svg","path","rect","text","circle","g"].indexOf(t)){n=document.createElementNS("http://www.w3.org/2000/svg",t);for(const t in e){const o="className"===t?"class":t;n.setAttribute(o,e[t])}}for(const t of i)Array.isArray(t)?n.append(...t):n.append(t);if(e?.dataSet)for(const t in e.dataSet)Object.prototype.hasOwnProperty.call(e.dataSet,t)&&(n.dataset[t]=e.dataSet[t]);return e&&!window.__aleartedJSXData&&Object.keys(e).find((t=>t.match(/^data-/)))&&(alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),e?.ref&&("function"==typeof e.ref?e.ref(n):e.ref=n),e?.on&&Object.entries(e.on).forEach((t=>{let[e,o]=t;n.addEventListener(e,o)})),e?.style&&Object.entries(e.style).forEach((t=>{let[e,o]=t;n.style.setProperty(e,o)})),n}}},422:()=>{!function(){function t(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var o=t instanceof Node;e.appendChild(o?t:document.createTextNode(String(t)))})),this.appendChild(e)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:t})}))}()}},e={};function o(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var o=function(e,o){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,o||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"===t(o)?o:String(o)}function i(t,o,i){return(o=e(o))in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,t}var r=o(457).Z;var n=o(457).Z;const a=t=>{let{variant:e}=t;const{moneyFormat:o}=FoxKitSettings,i=n("del",{class:"foxkit-product-card__compare-price foxkit-hidden"}),r=n("span",{class:"foxkit-product-card__price"});return r.innerHTML=window.FoxKitV2.Utils.formatMoney(e.price,o),e.compare_at_price&&(i.classList.remove("foxkit-hidden"),i.innerHTML=window.FoxKitV2.Utils.formatMoney(e.compare_at_price,o)),n("div",{className:"foxkit-card__prices"},i,e.price?r:null)};var s=o(457).Z;function c(t){let{product:e,recommended_products:o,settings:i}=t;const{item_count:n,total_price:c,_foxCartPrices:l=null}=window.FoxKitV2.cart,{discount:d,active_discount:p}=i,u=l?l.total_price:c,m=s("span",{className:"f-upsell__footer-cart-total foxkit-cart-subtotal"},window.FoxKitV2.Utils.formatMoney(u,window.FoxKitSettings.moneyFormat));return s("div",{className:"f-upsell"},s("div",{className:"f-upsell__header"},e.image?s("div",{className:"f-upsell__header-image"},s("img",{src:`${e.image}&width=200`,alt:""})):"",s("div",{className:"f-upsell__header-info"},s("p",null,s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"15",fill:"none",viewBox:"0 0 14 15"},s("path",{fill:"#000",d:"M2.1875 2.96484C3.51823 1.63411 5.1224.96875 7 .96875c1.8776 0 3.4727.66536 4.7852 1.99609 1.3307 1.3125 1.996 2.90756 1.996 4.78516 0 1.8776-.6653 3.4818-1.996 4.8125C10.4727 13.875 8.8776 14.5312 7 14.5312c-1.8776 0-3.48177-.6562-4.8125-1.9687C.875 11.2318.21875 9.6276.21875 7.75c0-1.8776.65625-3.47266 1.96875-4.78516zm8.668.92969C9.79818 2.81901 8.51302 2.28125 7 2.28125s-2.80729.53776-3.88281 1.61328C2.0599 4.95182 1.53125 6.23698 1.53125 7.75s.52865 2.8073 1.58594 3.8828C4.19271 12.6901 5.48698 13.2188 7 13.2188s2.79818-.5287 3.8555-1.586c1.0755-1.0755 1.6133-2.36978 1.6133-3.8828s-.5378-2.79818-1.6133-3.85547zm-.0274 1.94141c.1641.16406.1641.31901 0 .46484L6.125 10.9766c-.16406.164-.31901.164-.46484 0L3.17188 8.48828c-.16407-.16406-.16407-.31901 0-.46484l.6289-.62891c.14583-.14583.30078-.14583.46484 0L5.87891 9.0625l3.88281-3.85547c.14583-.14583.30078-.13672.46488.02735l.6015.60156z"}))," ",window.__i18n.tr("prepurchase_added")),s("h4",null,e?.title))),s("div",{className:"f-upsell__body"},s("h4",null,window.__i18n.tr("prepurchase_title",{product_title:e?.product_title})),p?s("div",{className:"f-upsell__discount mb-4"},s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",fill:"none",viewBox:"0 0 18 19"},s("path",{fill:"#DA3F3F",d:"M17.4375 7.49219C17.8125 8.00781 18 8.59375 18 9.25s-.1875 1.2539-.5625 1.793c-.375.5156-.8555.8789-1.4414 1.0898.2578.5625.3281 1.1719.2109 1.8281-.0937.6329-.375 1.1836-.8437 1.6524-.4688.4687-1.0195.75-1.6524.8437-.6328.1172-1.2421.0469-1.8281-.2109-.1406.3984-.3516.7383-.6328 1.0195-.2812.3047-.6211.5391-1.0195.7032-.37503.1874-.78519.2812-1.2305.2812-.65625 0-1.25391-.1875-1.79297-.5625-.51562-.375-.87891-.8555-1.08984-1.4414-.58594.2578-1.19531.3281-1.82813.2109-.63281-.0937-1.18359-.375-1.65234-.8437-.46875-.4688-.76172-1.0195-.87891-1.6524-.09375-.6562-.01172-1.2656.2461-1.8281C1.41797 11.9219.9375 11.5586.5625 11.043.1875 10.5039 0 9.90625 0 9.25s.1875-1.24219.5625-1.75781c.375-.53906.85547-.91407 1.44141-1.125-.25782-.5625-.33985-1.16016-.2461-1.79297.11719-.65625.41016-1.21875.87891-1.6875.46875-.46875 1.01953-.75 1.65234-.84375.65625-.11719 1.26563-.04688 1.82813.21094.21093-.58594.57422-1.06641 1.08984-1.44141C7.74609.4375 8.34375.25 9 .25s1.2422.1875 1.7578.5625c.5391.375.9141.85547 1.125 1.44141.5625-.25782 1.1602-.32813 1.793-.21094.6562.09375 1.2187.375 1.6875.84375.4687.46875.75 1.03125.8437 1.6875.1172.63281.0469 1.23047-.2109 1.79297.5859.21093 1.0664.58594 1.4414 1.125zM7.52344 6.22656C7.3125 5.99219 7.05469 5.875 6.75 5.875s-.57422.11719-.80859.35156C5.73047 6.4375 5.625 6.69531 5.625 7s.10547.57422.31641.80859c.23437.21094.5039.31641.80859.31641s.5625-.10547.77344-.31641C7.75781 7.57422 7.875 7.30469 7.875 7s-.11719-.5625-.35156-.77344zm-.35156 6.04684l4.85152-4.85152c.2578-.25782.2578-.51563 0-.77344l-.4218-.42188c-.2578-.25781-.5157-.25781-.7735 0L5.97656 11.0781c-.25781.2578-.25781.5157 0 .7735l.42188.4218c.25781.2578.51562.2578.77344 0zm3.26952.0352c.2344.2109.5039.3164.8086.3164.3047 0 .5625-.1055.7734-.3164.2344-.2344.3516-.5039.3516-.8086 0-.3047-.1172-.5625-.3516-.7734-.2109-.2344-.4687-.3516-.7734-.3516-.3047 0-.5742.1172-.8086.3516-.2109.2109-.3164.4687-.3164.7734 0 .3047.1055.5742.3164.8086z"})),function(t){const e=r("span",null),o="PERCENTAGE"===t?.type?`${t?.value}%`:window.FoxKitV2.Utils.formatMoney(100*t?.value*Number(window.Shopify?.currency?.rate||1),FoxKitSettings.moneyFormat);return e.innerHTML=window.__i18n.tr("discount_summary",{discount_value:o}),e}(d)):"",s("div",{className:"f-upsell__products"},o?.length&&o?.map(((t,e)=>{const{available:o}=t,r=t.variants.filter((t=>t.available))[0];if(!r)return"";const n=1===t.variants.length&&"default title"===r.title.toLowerCase();return s("foxkit-product-card",{key:e,className:"f-upsell__product foxkit-product-card",dataSet:{plugin:"pre-purchase"}},s("form",{className:"f-upsell__product-inner foxkit-product-form"},p?s("input",{type:"hidden",name:`properties[${window.window.FoxKitV2.Utils.PLUGINS_HAS_DISCOUNT_MAP_PROPERTIES?.PrePurchase}]`,value:i._id}):"",s("div",{className:"f-upsell__product-image spc__main-img"},s("a",{href:t.url},s("img",{className:"foxkit-product-card__img",src:t.featured_image?`${t.featured_image}&width=300`:"https://dummyimage.com/300x/ddd/aaa",alt:t.title}))),s("div",{className:"f-upsell__product-info"},s("h3",{className:"h4"},s("a",{href:t.url},t.title)),s(a,{variant:r}),n?s("input",{type:"hidden",name:"id",value:r.id}):s("div",{className:"f-upsell__product-options"},s("select",{value:r.id,name:"id",className:"sf-product-variant-option-dropdown foxkit-form-control combined-variant"},t.variants?.map(((t,e)=>s("option",{key:e,value:t.id,disabled:!t.available},t?.title))))),s("button",{type:"submit",className:"add-to-cart foxkit-button foxkit-button--primary btn-atc relative",disabled:!o,name:"add"},s("span",{className:"foxkit-spinner"},s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))),s("span",{className:"atc-text"},window.__i18n.tr("add_to_cart_button"))))))})))),s("div",{className:"f-upsell__footer"},s("div",{className:"f-upsell__footer-cart"},s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"21",fill:"none",viewBox:"0 0 18 21"},s("path",{fill:"#000",d:"M13.75 5.5h3.75v11.875c0 .8594-.3125 1.5885-.9375 2.1875-.599.625-1.3281.9375-2.1875.9375H3.125c-.85938 0-1.60156-.3125-2.226562-.9375C.299479 18.9635 0 18.2344 0 17.375V5.5h3.75c0-1.38021.48177-2.55208 1.44531-3.51562C6.1849.994792 7.36979.5 8.75.5c1.3802 0 2.5521.494792 3.5156 1.48438C13.2552 2.94792 13.75 4.11979 13.75 5.5zm-2.8125-2.1875c-.599-.625-1.32812-.9375-2.1875-.9375s-1.60156.3125-2.22656.9375C5.92448 3.91146 5.625 4.64062 5.625 5.5h6.25c0-.85938-.3125-1.58854-.9375-2.1875zM15.625 17.375v-10H13.75v1.5625c0 .26042-.0911.48177-.2734.66406-.1823.18229-.4037.27344-.6641.27344s-.4818-.09115-.6641-.27344c-.1823-.18229-.2734-.40364-.2734-.66406V7.375h-6.25v1.5625c0 .26042-.09115.48177-.27344.66406s-.40364.27344-.66406.27344-.48177-.09115-.66406-.27344S3.75 9.19792 3.75 8.9375V7.375H1.875v10c0 .3385.11719.625.35156.8594.26042.2604.5599.3906.89844.3906h11.25c.3385 0 .625-.1302.8594-.3906.2604-.2344.3906-.5209.3906-.8594z"})),s("span",{className:"f-upsell__footer-cartcount foxkit-cart-count"},n),m),s("div",{className:"f-upsell__footer-action"},s("a",{href:window.FoxKitSettings.routes.cart,className:"foxkit-button foxkit-button--primary"},window.__i18n.tr("view_cart")))))}var l=o(457).Z;window.FoxKitV2=window.FoxKitV2||{},window.FoxKitV2.Modules.PrePurchase=class{constructor(){i(this,"selectors",{container:".f-upsell",productContainer:'[data-section-id="product-template"]',productItem:".f-upsell__product",productOptions:[".f-upsell__product-variant"]}),i(this,"init",(()=>{window.MinimogTheme&&MinimogTheme?.ProductQuickView&&MinimogTheme.ProductQuickView.close(),this.getConfig()})),i(this,"getConfig",(async()=>{let t={plg:"prePurchase"};this.product.product_id&&(t.productId=this.product.product_id);const e=this?.product?.handle,o=await FoxKitV2.Utils.getCollectionIdsByProductHandle(e);o?.length&&(t.collectionIds=o?.filter(Boolean)),this.settings=await FoxKitV2.Helpers.getPluginData(t),this.settings&&this.settings?.active&&(this.cart=await FoxKitV2.getCart(),this.renderComponent())})),i(this,"renderComponent",(()=>{this.component=l(c,{product:this.product,recommended_products:this.settings.products,settings:this.settings,cart:this.cart}),this.component.querySelectorAll("foxkit-product-card").forEach(((t,e)=>{t.setupData(this.settings.products[e])})),this.popup.removeChild(),this.popup.appendChild(this.component),this.popup.open()})),"cart"!==window.FoxKitSettings.template&&(this.popup=new window.FoxKitV2.Modules.Modal("foxkit-pre-purchase"),window.FoxkitEvents.subscribe("ON_ITEM_ADDED",(async t=>{t?.id&&(this.product=t,this.init())})))}}})()})();